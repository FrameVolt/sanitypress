<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Class UnsafePool&lt;T&gt; | RTCubeExtensions 文档 </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Class UnsafePool&lt;T&gt; | RTCubeExtensions 文档 ">
      
      <meta name="description" content="An unsafe pool class that is used for benchmarking.">
      <link rel="icon" href="../resources/images/favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/RuntimeCube/RTCubeExtensions/new/main/apiSpec/new?filename=RTCube_Extensions_UnsafePool_1.md&amp;value=---%0Auid%3A%20RTCube.Extensions.UnsafePool%601%0Asummary%3A%20&#39;*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax&#39;%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="ManagedReference">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="/">
            <img id="logo" class="svg" src="../resources/images/logo.svg" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="RTCube.Extensions.UnsafePool`1">



  <h1 id="RTCube_Extensions_UnsafePool_1" data-uid="RTCube.Extensions.UnsafePool`1" class="text-break">
Class UnsafePool&lt;T&gt;  <a class="header-action link-secondary" title="View source" href="https://github.com/RuntimeCube/RTCubeExtensions/blob/main/Assets/RTCubeExtensions/Runtime/Patterns/UnsafePool.cs/#L20"><i class="bi bi-code-slash"></i></a>
  </h1>

  <div class="facts text-secondary">
    <dl><dt>Namespace</dt><dd><a class="xref" href="RTCube.html">RTCube</a>.<a class="xref" href="RTCube.Extensions.html">Extensions</a></dd></dl>
  
  </div>

  <div class="markdown summary"><p>An unsafe pool class that is used for benchmarking.</p>
</div>
  <div class="markdown conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public class UnsafePool&lt;T&gt; : IPool&lt;T&gt;</code></pre>
  </div>



  <h4 class="section">Type Parameters</h4>
  <dl class="parameters">
    <dt><code>T</code></dt>
    <dd></dd>
  </dl>

  <dl class="typelist inheritance">
    <dt>Inheritance</dt>
    <dd>
      <div><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object">object</a></div>
      <div><span class="xref">UnsafePool&lt;T&gt;</span></div>
    </dd>
  </dl>

  <dl class="typelist implements">
    <dt>Implements</dt>
    <dd>
      <div><a class="xref" href="RTCube.Extensions.IPool-1.html">IPool</a>&lt;T&gt;</div>
    </dd>
  </dl>


  <dl class="typelist inheritedMembers">
    <dt>Inherited Members</dt>
    <dd>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object)">object.Equals(object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.equals#system-object-equals(system-object-system-object)">object.Equals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gethashcode">object.GetHashCode()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.gettype">object.GetType()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.memberwiseclone">object.MemberwiseClone()</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.referenceequals">object.ReferenceEquals(object, object)</a>
    </div>
    <div>
      <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.object.tostring">object.ToString()</a>
    </div>
  </dd></dl>

  <dl class="typelist extensionMethods">
    <dt>Extension Methods</dt>
    <dd>
  <div>
      <a class="xref" href="RTCube.Extensions.PoolExtensions.html#RTCube_Extensions_PoolExtensions_Clear__1_RTCube_Extensions_IPool___0__System_Boolean_">PoolExtensions.Clear&lt;T&gt;(IPool&lt;T&gt;, bool)</a>
  </div>
  <div>
      <a class="xref" href="RTCube.Extensions.PoolExtensions.html#RTCube_Extensions_PoolExtensions_SetCapacity__1_RTCube_Extensions_IPool___0__System_Int32_System_Boolean_">PoolExtensions.SetCapacity&lt;T&gt;(IPool&lt;T&gt;, int, bool)</a>
  </div>
  <div>
      <a class="xref" href="RTCube.Extensions.PoolExtensions.html#RTCube_Extensions_PoolExtensions_Trim__1_RTCube_Extensions_IPool___0__">PoolExtensions.Trim&lt;T&gt;(IPool&lt;T&gt;)</a>
  </div>
  <div>
      <a class="xref" href="RTCube.Extensions.PoolExtensions.html#RTCube_Extensions_PoolExtensions_TryGet__1_RTCube_Extensions_IPool___0____0__">PoolExtensions.TryGet&lt;T&gt;(IPool&lt;T&gt;, out T)</a>
  </div>
  <div>
      <a class="xref" href="RTCube.Extensions.ThrowHelper.html#RTCube_Extensions_ThrowHelper_ThrowIfNull_System_Object_System_String_">ThrowHelper.ThrowIfNull(object, string)</a>
  </div>
  </dd></dl>



  <h2 id="RTCube_Extensions_UnsafePool_1_remarks">Remarks</h2>
  <div class="markdown level0 remarks"><p>For the most part, this class works similar to <a class="xref" href="RTCube.Extensions.Pool-1.html">Pool&lt;T&gt;</a>, except that it does not keep references to
active objects, so when they are released no checks as to their validity is performed. Also,
<a class="xref" href="RTCube.Extensions.UnsafePool-1.html#RTCube_Extensions_UnsafePool_1_ReleaseAll">ReleaseAll()</a> is not supported, and <a class="xref" href="RTCube.Extensions.UnsafePool-1.html#RTCube_Extensions_UnsafePool_1_DecreaseCapacity_System_Int32_System_Boolean_">DecreaseCapacity(int, bool)</a> cannot drecrease the capacity below
the number of currently inactive objects.</p>
<p>In general, you should use a <a class="xref" href="RTCube.Extensions.HashPool-1.html">HashPool&lt;T&gt;</a>; this unsafe pool os only very marginally faster.</p>
</div>


  <h2 class="section" id="constructors">Constructors
</h2>


  <a id="RTCube_Extensions_UnsafePool_1__ctor_" data-uid="RTCube.Extensions.UnsafePool`1.#ctor*"></a>

  <h3 id="RTCube_Extensions_UnsafePool_1__ctor_System_Int32_System_Func__0__System_Action__0__System_Action__0__System_Action__0__" data-uid="RTCube.Extensions.UnsafePool`1.#ctor(System.Int32,System.Func{`0},System.Action{`0},System.Action{`0},System.Action{`0})">
  UnsafePool(int, Func&lt;T&gt;, Action&lt;T&gt;, Action&lt;T&gt;, Action&lt;T&gt;)
  <a class="header-action link-secondary" title="View source" href="https://github.com/RuntimeCube/RTCubeExtensions/blob/main/Assets/RTCubeExtensions/Runtime/Patterns/UnsafePool.cs/#L28"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"></div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public UnsafePool(int initialCapacity, Func&lt;T&gt; create, Action&lt;T&gt; destroy = null, Action&lt;T&gt; activate = null, Action&lt;T&gt; deactivate = null)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>initialCapacity</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd></dd>
    <dt><code>create</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.func-1">Func</a>&lt;T&gt;</dt>
    <dd></dd>
    <dt><code>destroy</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.action-1">Action</a>&lt;T&gt;</dt>
    <dd></dd>
    <dt><code>activate</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.action-1">Action</a>&lt;T&gt;</dt>
    <dd></dd>
    <dt><code>deactivate</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.action-1">Action</a>&lt;T&gt;</dt>
    <dd></dd>
  </dl>












  <h2 class="section" id="properties">Properties
</h2>


  <a id="RTCube_Extensions_UnsafePool_1_ActiveCount_" data-uid="RTCube.Extensions.UnsafePool`1.ActiveCount*"></a>

  <h3 id="RTCube_Extensions_UnsafePool_1_ActiveCount" data-uid="RTCube.Extensions.UnsafePool`1.ActiveCount">
  ActiveCount
  <a class="header-action link-secondary" title="View source" href="https://github.com/RuntimeCube/RTCubeExtensions/blob/main/Assets/RTCubeExtensions/Runtime/Patterns/UnsafePool.cs/#L64"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>The number of objects that are currently active.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public int ActiveCount { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd></dd>
  </dl>








  <a id="RTCube_Extensions_UnsafePool_1_Capacity_" data-uid="RTCube.Extensions.UnsafePool`1.Capacity*"></a>

  <h3 id="RTCube_Extensions_UnsafePool_1_Capacity" data-uid="RTCube.Extensions.UnsafePool`1.Capacity">
  Capacity
  <a class="header-action link-secondary" title="View source" href="https://github.com/RuntimeCube/RTCubeExtensions/blob/main/Assets/RTCubeExtensions/Runtime/Patterns/UnsafePool.cs/#L61"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>The total number of objects in the pool (active and inactive), the maximum number of objects that can be
returned by <a class="xref" href="RTCube.Extensions.IPool-1.html#RTCube_Extensions_IPool_1_Get">Get()</a>.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public int Capacity { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd><p>The capacity.</p>
</dd>
  </dl>








  <a id="RTCube_Extensions_UnsafePool_1_HasAvailableObject_" data-uid="RTCube.Extensions.UnsafePool`1.HasAvailableObject*"></a>

  <h3 id="RTCube_Extensions_UnsafePool_1_HasAvailableObject" data-uid="RTCube.Extensions.UnsafePool`1.HasAvailableObject">
  HasAvailableObject
  <a class="header-action link-secondary" title="View source" href="https://github.com/RuntimeCube/RTCubeExtensions/blob/main/Assets/RTCubeExtensions/Runtime/Patterns/UnsafePool.cs/#L67"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Returns whether there is an inactive object available to get.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public bool HasAvailableObject { get; }</code></pre>
  </div>





  <h4 class="section">Property Value</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a></dt>
    <dd><p><a href="https://learn.microsoft.com/dotnet/csharp/language-reference/builtin-types/bool">true</a> if an inactive object is available; otherwise, <a href="https://learn.microsoft.com/dotnet/csharp/language-reference/builtin-types/bool">false</a>.</p>
</dd>
  </dl>








  <h2 class="section" id="methods">Methods
</h2>


  <a id="RTCube_Extensions_UnsafePool_1_DecreaseCapacity_" data-uid="RTCube.Extensions.UnsafePool`1.DecreaseCapacity*"></a>

  <h3 id="RTCube_Extensions_UnsafePool_1_DecreaseCapacity_System_Int32_System_Boolean_" data-uid="RTCube.Extensions.UnsafePool`1.DecreaseCapacity(System.Int32,System.Boolean)">
  DecreaseCapacity(int, bool)
  <a class="header-action link-secondary" title="View source" href="https://github.com/RuntimeCube/RTCubeExtensions/blob/main/Assets/RTCubeExtensions/Runtime/Patterns/UnsafePool.cs/#L123"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Decreases the capacity of the pool.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public int DecreaseCapacity(int decrement, bool deactivateFirst = false)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>decrement</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd><p>The number of pool objects to destroy.</p>
</dd>
    <dt><code>deactivateFirst</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.boolean">bool</a></dt>
    <dd><p>Whether to deactivate objects before destroying them. Since this pool does not
keep track of active objects, no active objects will be destroyed, so this parameter is not relevant.</p>
</dd>
  </dl>

  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd><p>The number of objects that were destroyed.</p>
</dd>
  </dl>







  <h4 class="section" id="RTCube_Extensions_UnsafePool_1_DecreaseCapacity_System_Int32_System_Boolean__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>This method will not decrease the capacity below the number of currently inactive objects, in other words
active objects will not be destroyed. Therefor, <code class="paramref">deactivateFirst</code> is not relevant.</p>
</div>




  <a id="RTCube_Extensions_UnsafePool_1_Get_" data-uid="RTCube.Extensions.UnsafePool`1.Get*"></a>

  <h3 id="RTCube_Extensions_UnsafePool_1_Get" data-uid="RTCube.Extensions.UnsafePool`1.Get">
  Get()
  <a class="header-action link-secondary" title="View source" href="https://github.com/RuntimeCube/RTCubeExtensions/blob/main/Assets/RTCubeExtensions/Runtime/Patterns/UnsafePool.cs/#L70"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Gets a new object from the pool.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public T Get()</code></pre>
  </div>


  <h4 class="section">Returns</h4>
  <dl class="parameters">
    <dt><span class="xref">T</span></dt>
    <dd><p>A freshly activated object.</p>
</dd>
  </dl>








  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.invalidoperationexception">InvalidOperationException</a></dt>
    <dd><p>No inactive objects are available.</p>
</dd>
  </dl>



  <a id="RTCube_Extensions_UnsafePool_1_IncreaseCapacity_" data-uid="RTCube.Extensions.UnsafePool`1.IncreaseCapacity*"></a>

  <h3 id="RTCube_Extensions_UnsafePool_1_IncreaseCapacity_System_Int32_" data-uid="RTCube.Extensions.UnsafePool`1.IncreaseCapacity(System.Int32)">
  IncreaseCapacity(int)
  <a class="header-action link-secondary" title="View source" href="https://github.com/RuntimeCube/RTCubeExtensions/blob/main/Assets/RTCubeExtensions/Runtime/Patterns/UnsafePool.cs/#L105"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Increases the capacity of the pool.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void IncreaseCapacity(int increment)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>increment</code> <a class="xref" href="https://learn.microsoft.com/dotnet/api/system.int32">int</a></dt>
    <dd><p>The number of new pool objects to add.</p>
</dd>
  </dl>









  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.argumentoutofrangeexception">ArgumentOutOfRangeException</a></dt>
    <dd><p><code class="paramref">increment</code> is negative.</p>
</dd>
  </dl>



  <a id="RTCube_Extensions_UnsafePool_1_Release_" data-uid="RTCube.Extensions.UnsafePool`1.Release*"></a>

  <h3 id="RTCube_Extensions_UnsafePool_1_Release__0_" data-uid="RTCube.Extensions.UnsafePool`1.Release(`0)">
  Release(T)
  <a class="header-action link-secondary" title="View source" href="https://github.com/RuntimeCube/RTCubeExtensions/blob/main/Assets/RTCubeExtensions/Runtime/Patterns/UnsafePool.cs/#L91"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"><p>Returns the object to the pool.</p>
</div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void Release(T obj)</code></pre>
  </div>

  <h4 class="section">Parameters</h4>
  <dl class="parameters">
    <dt><code>obj</code> <span class="xref">T</span></dt>
    <dd><p>The object to return to the pool.</p>
</dd>
  </dl>








  <h4 class="section" id="RTCube_Extensions_UnsafePool_1_Release__0__remarks">Remarks</h4>
  <div class="markdown level1 remarks"><p>This method does not check if the object is already inactive, and will not deactivate it if it is. This method
will also not check if this object does not belong in the pool at all (that is, was never acquired from this),
and will not throw an exception if this is the case.</p>
</div>

  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.invalidoperationexception">InvalidOperationException</a></dt>
    <dd><p>The pool is full.</p>
</dd>
  </dl>



  <a id="RTCube_Extensions_UnsafePool_1_ReleaseAll_" data-uid="RTCube.Extensions.UnsafePool`1.ReleaseAll*"></a>

  <h3 id="RTCube_Extensions_UnsafePool_1_ReleaseAll" data-uid="RTCube.Extensions.UnsafePool`1.ReleaseAll">
  ReleaseAll()
  <a class="header-action link-secondary" title="View source" href="https://github.com/RuntimeCube/RTCubeExtensions/blob/main/Assets/RTCubeExtensions/Runtime/Patterns/UnsafePool.cs/#L141"><i class="bi bi-code-slash"></i></a>
  </h3>

  <div class="markdown level1 summary"></div>
  <div class="markdown level1 conceptual"></div>

  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void ReleaseAll()</code></pre>
  </div>










  <h4 class="section">Exceptions</h4>
  <dl class="parameters">
    <dt><a class="xref" href="https://learn.microsoft.com/dotnet/api/system.notsupportedexception">NotSupportedException</a></dt>
    <dd></dd>
  </dl>




</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/RuntimeCube/RTCubeExtensions/blob/main/Assets/RTCubeExtensions/Runtime/Patterns/UnsafePool.cs/#L20" class="edit-link">Edit this page</a>
        </div>


      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          RTCubeExtensions 文档
        </div>
      </div>
    </footer>
  </body>
</html>
